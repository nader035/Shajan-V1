<div class="flex flex-col items-center py-20 animate-fade-in">
  <div
    id="Marsa-card"
    class="relative w-[380px] h-[675px] rounded-[3.5rem] overflow-hidden flex flex-col items-center justify-between p-14 text-center transition-all duration-500 shadow-2xl border border-[var(--color-Marsa-border)]"
    [style.backgroundColor]="'var(--color-card)'"
  >
    <div class="relative z-20 opacity-30">
      <span class="text-[10px] tracking-[0.8em] uppercase font-light text-Marsa-gold"
        >مَرسى — Marsa</span
      >
    </div>

    <div
      class="absolute inset-0 bg-gradient-to-b from-Marsa-maroon/20 via-transparent to-black/40 pointer-events-none transition-opacity duration-700"
      [style.opacity]="isDarkMode() ? '1' : '0.3'"
    ></div>

    <div class="relative z-10 flex-1 flex flex-col items-center justify-center w-full px-2 gap-6">
      @if (store.isLoading()) {
        <div class="flex flex-col items-center gap-3">
          <div class="h-1.5 w-24 bg-Marsa-gold/20 animate-pulse rounded-full"></div>
          <span class="text-Marsa-gold/40 text-[10px] tracking-widest uppercase animate-pulse">
            {{ lang() === 'ar' ? 'البحث عن صدى...' : 'Finding echo...' }}
          </span>
        </div>
      } @else {
        <p
          [class]="dynamicFontSize()"
          class="font-sans leading-relaxed whitespace-pre-line text-glow-gold transition-all duration-1000 ease-out font-medium text-[var(--color-foreground)]"
          style="unicode-bidi: plaintext"
        >
          {{
            store.generatedContent() ||
              (lang() === 'ar' ? 'صدى روحك سيرسو هنا' : 'Your soul’s echo will anchor here')
          }}
        </p>

        @if (store.generatedContent()) {
          <div class="animate-fade-in flex flex-col items-center gap-2">
            <div class="h-[0.5px] w-8 bg-Marsa-gold/30"></div>
            <span class="text-Marsa-gold/80 font-serif italic text-xs tracking-wide">
              {{ store.author() }}
            </span>
          </div>
        }
      }
    </div>

    <div class="relative z-20 flex flex-col items-center gap-4">
      <div class="flex flex-col gap-1.5">
        <span class="text-Marsa-gold text-[10px] tracking-[0.5em] uppercase font-bold">
          {{ lang() === 'ar' ? 'من مَرسى' : 'From Marsa' }}
        </span>
        <span class="opacity-20 text-[7px] tracking-[1em] uppercase text-[var(--color-foreground)]">
          Marsa.ai
        </span>
      </div>
    </div>
  </div>

  <div class="flex flex-col items-center gap-5 mt-12 w-full max-w-[380px]">
    <div class="flex gap-4 w-full px-4">
      <button
        (click)="onShare()"
        [disabled]="store.isLoading()"
        class="flex-1 bg-Marsa-maroon text-white px-6 py-5 rounded-[2rem] flex items-center justify-center gap-3 active:scale-95 transition-all cursor-pointer shadow-lg hover:shadow-Marsa-maroon/30"
      >
        <lucide-icon [name]="shareIcon" [size]="18"></lucide-icon>
        <span class="font-sans text-sm font-bold italic">
          {{ lang() === 'ar' ? 'مشاركة القصة' : 'Share Story' }}
        </span>
      </button>
    </div>
  </div>
</div>
